{
    "meta": {
        "label": "Gantt Chart",
        "description": "Interactive Gantt chart visualization with task dependencies, progress tracking, and color coding",
        "icon": "icon-calendar"
    },

    "baseType": "STANDARD",
    "hasBackend": "true",
    "noJSSecurity": "true",
    "standardWebAppLibraries": [
        "jquery",
        "dataiku"
    ],

    "chart": {
        "datasetParamName": "dataset",
        "leftBarLabel": "Chart Configuration",
        "topBar": "STD_FORM",
        "topBarParams": [
            {
                "name": "idColumn",
                "type": "DATASET_COLUMN",
                "datasetParamName": "dataset",
                "label": "Task ID",
                "description": "Unique identifier for each task (required for dependencies)",
                "mandatory": true
            },
            {
                "name": "startColumn",
                "type": "DATASET_COLUMN",
                "datasetParamName": "dataset",
                "label": "Start Date",
                "description": "Task start date",
                "mandatory": true
            },
            {
                "name": "endColumn",
                "type": "DATASET_COLUMN",
                "datasetParamName": "dataset",
                "label": "End Date",
                "description": "Task end date",
                "mandatory": true
            }
        ],
        "leftBarParams": [
            {
                "type": "SEPARATOR",
                "label": "1. Data & Identity"
            },
            {
                "name": "nameColumn",
                "type": "DATASET_COLUMN",
                "datasetParamName": "dataset",
                "label": "Task Name",
                "mandatory": false
            },
           {
                "name": "dependenciesColumn",
                "type": "DATASET_COLUMN",
                "datasetParamName": "dataset",
                "label": "Dependencies",
                "description": "Task(s) that must finish first (e.g., A or A, B, C)",
                "mandatory": false
            },
            {
                "name": "progressColumn",
                "type": "DATASET_COLUMN",
                "datasetParamName": "dataset",
                "label": "Progress (%)",
                "description": "Completion percentage (0-100)",
                "mandatory": false
            },
            {
                "name": "tooltipColumns",
                "type": "DATASET_COLUMNS",
                "datasetParamName": "dataset",
                "label": "Additional Tooltip Field",
                "description": "Extra data shown when clicking/hovering a bar",
                "mandatory": false
            },

            {
                "type": "SEPARATOR",
                "label": "2. Arrangement (Task Grouping and Sorting)"
            },
            {
                "name": "groupByColumns",
                "type": "DATASET_COLUMNS",
                "datasetParamName": "dataset",
                "label": "Primary Grouping",
                "description": "Macro-structure swimlanes (e.g., Workstream)",
                "mandatory": false
            },
            {
                "name": "sortBy",
                "type": "SELECT",
                "label": "Sort Within Groups",
                "description": "Micro-order inside each swimlane",
                "defaultValue": "dependencies",
                "selectChoices": [
                    {"value": "none", "label": "Dataset Order"},
                    {"value": "start_asc", "label": "Start Date (Earliest First)"},
                    {"value": "start_desc", "label": "Start Date (Latest First)"},
                    {"value": "end_asc", "label": "End Date (Earliest First)"},
                    {"value": "end_desc", "label": "End Date (Latest First)"},
                    {"value": "name_asc", "label": "Name (A-Z)"},
                    {"value": "name_desc", "label": "Name (Z-A)"},
                    {"value": "duration_asc", "label": "Duration (Shortest First)"},
                    {"value": "duration_desc", "label": "Duration (Longest First)"},
                    {"value": "dependencies", "label": "Dependencies (Topological)"}
                ]
            },
            {
                "type": "SEPARATOR",
                "label": "3. Timeline & Interactivity"
            },

            {
                "name": "showExpectedProgress",
                "type": "BOOLEAN",
                "label": "Show expected progress",
                "description": "Display marker showing where progress should be based on current date",
                "defaultValue": false
            },
            {
                "name": "chartStartDate",
                "type": "DATE",
                "label": "Fixed Start Date",
                "description": "YYYY-MM-DD format. Leave empty for automatic.",
                "mandatory": false
            },
            {
                "name": "chartEndDate",
                "type": "DATE",
                "label": "Fixed End Date",
                "description": "YYYY-MM-DD format. Leave empty for automatic.",
                "mandatory": false
            },
            {
                "type": "SEPARATOR",
                "label": "4. Visual Styling"
            },
            {
                "name": "colorColumn",
                "type": "DATASET_COLUMN",
                "datasetParamName": "dataset",
                "label": "Color By",
                "description": "Categorical column for color-coding tasks (e.g., Status, Streams)",
                "mandatory": false
            },
            {
                "name": "colorPalette",
                "type": "SELECT",
                "label": "Color Palette",
                "description": "Color scheme for task bars",
                "defaultValue": "classic",
                "visibilityCondition": "model.colorColumn != null",
                "selectChoices": [
                    {"value": "classic", "label": "Classic (Vibrant)"},
                    {"value": "pastel", "label": "Pastel (Soft)"},
                    {"value": "dark", "label": "Dark Mode"},
                    {"value": "dataiku", "label": "Dataiku"},
                    {"value": "custom", "label": "Custom (Preset)"}
                ]
            },
            {
                "name": "customPalettePreset",
                "type": "PRESET",
                "label": "Custom Palette",
                "parameterSetId": "custom-palette",
                "visibilityCondition": "model.colorPalette == 'custom'",
                "mandatory": false
            },

            {
                "name": "showStylingAdvanced",
                "type": "BOOLEAN",
                "label": "Customize bar & grid dimensions?",
                "defaultValue": false
            },

            {
                "name": "barHeight",
                "type": "INT",
                "label": "Bar Height",
                "description": "Height of task bars in pixels",
                "visibilityCondition": "model.showStylingAdvanced",
                "defaultValue": 30,
                "minI": 15,
                "maxI": 60
            },
            {
                "name": "barCornerRadius",
                "type": "INT",
                "label": "Bar Corner Radius",
                "description": "Roundness of bar corners",
                "visibilityCondition": "model.showStylingAdvanced",
                "defaultValue": 10,
                "minI": 0,
                "maxI": 15
            },
            {
                "name": "columnWidth",
                "type": "INT",
                "label": "Column Width",
                "description": "Pixel width of time columns",
                "visibilityCondition": "model.showStylingAdvanced",
                "defaultValue": 45,
                "minI": 25,
                "maxI": 500
            },
            {
                "name": "padding",
                "type": "INT",
                "label": "Padding",
                "description": "Pixel padding between elements",
                "visibilityCondition": "model.showStylingAdvanced",
                "defaultValue": 18,
                "minI": 5,
                "maxI": 40
            },

            {
                "name": "showVerticalGridLines",
                "type": "BOOLEAN",
                "label": "Show vertical grid lines",
                "defaultValue": true,
                "visibilityCondition": "model.showStylingAdvanced"
            },
            {
                "name": "showHorizontalGridLines",
                "type": "BOOLEAN",
                "label": "Show horizontal grid lines",
                "defaultValue": true,
                "visibilityCondition": "model.showStylingAdvanced"
            },
            {
                "name": "gridLineOpacity",
                "type": "INT",
                "label": "Grid line opacity (%)",
                "visibilityCondition": "model.showStylingAdvanced",
                "defaultValue": 100,
                "minI": 0,
                "maxI": 100
            },
            {
                "type": "SEPARATOR",
                "label": "5. System Settings"
            },
            {
                "name": "showSystemAdvanced",
                "type": "BOOLEAN",
                "label": "Show System Settings?",
                "defaultValue": false
            },
            {
                "name": "viewMode",
                "type": "SELECT",
                "label": "Default View",
                "description": "Initial time scale",
                "mandatory": true,
                "defaultValue": "Month",
                "visibilityCondition": "model.showSystemAdvanced",
                "selectChoices": [
                    {"value": "Hour", "label": "Hour"},
                    {"value": "Quarter Day", "label": "Quarter Day"},
                    {"value": "Half Day", "label": "Half Day"},
                    {"value": "Day", "label": "Day"},
                    {"value": "Week", "label": "Week"},
                    {"value": "Month", "label": "Month"},
                    {"value": "Year", "label": "Year"}
                ]
            },
            {
                "name": "scrollTo",
                "type": "SELECT",
                "label": "Initial scroll position",
                "defaultValue": "today",
                "visibilityCondition": "model.showSystemAdvanced",
                "selectChoices": [
                    {"value": "today", "label": "Today"},
                    {"value": "start", "label": "First task"},
                    {"value": "end", "label": "Last task"}
                ]
            },
            {
                "name": "popupOn",
                "type": "SELECT",
                "label": "Show task details on",
                "defaultValue": "click",
                "visibilityCondition": "model.showSystemAdvanced",
                "selectChoices": [
                    {"value": "click", "label": "Click"},
                    {"value": "hover", "label": "Hover"}
                ]
            },
            {
                "name": "language",
                "type": "SELECT",
                "label": "Language",
                "description": "Language for date/month formatting",
                "visibilityCondition": "model.showSystemAdvanced",
                "defaultValue": "en",
                "selectChoices": [
                    {"value": "en", "label": "English"},
                    {"value": "es", "label": "Español"},
                    {"value": "de", "label": "Deutsch"},
                    {"value": "fr", "label": "Français"},
                    {"value": "pt", "label": "Português"},
                    {"value": "ru", "label": "Русский"},
                    {"value": "tr", "label": "Türkçe"},
                    {"value": "zh", "label": "中文"},
                    {"value": "ja", "label": "日本語"},
                    {"value": "ko", "label": "한국어"},
                    {"value": "it", "label": "Italiano"}
                ]
            },
            {
                "name": "dateFormat",
                "type": "SELECT",
                "label": "Date Format",
                "description": "Format for dates shown in task popups",
                "visibilityCondition": "model.showSystemAdvanced",
                "defaultValue": "ISO",
                "selectChoices": [
                    {"value": "ISO", "label": "ISO 8601 (2024-12-27)"},
                    {"value": "US", "label": "US (12/27/2024)"},
                    {"value": "EU", "label": "European (27/12/2024)"},
                    {"value": "LONG", "label": "Long (December 27, 2024)"},
                    {"value": "SHORT", "label": "Short (Dec 27)"}
                ]
            },
            {
                "name": "highlightWeekends",
                "type": "BOOLEAN",
                "label": "Highlight weekends",
                "visibilityCondition": "model.showSystemAdvanced",
                "defaultValue": false
            },
            {
                "name": "duplicateIdHandling",
                "type": "SELECT",
                "label": "Duplicate ID handling",
                "description": "How to handle duplicate task IDs in the dataset",
                "visibilityCondition": "model.showSystemAdvanced",
                "defaultValue": "rename",
                "selectChoices": [
                    {"value": "rename", "label": "Auto-rename (append suffix)"},
                    {"value": "skip", "label": "Skip duplicates (keep first)"}
                ]
            },
            {
                "name": "maxTasks",
                "type": "INT",
                "label": "Max tasks to display",
                "description": "0 = unlimited (use with caution on large datasets)",
                "visibilityCondition": "model.showSystemAdvanced",
                "defaultValue": 1000,
                "minI": 0
            }
        ],
        "canFilter": true,
        "canFacet": false
    }
}
