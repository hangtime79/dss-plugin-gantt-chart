# Post-Mortem: v0.10.0

**Branch:** `feature/v0.10.0-i18n`
**Type:** Feature
**Duration:** 1 day (Started: 2025-12-29, Completed: 2025-12-29)
**Outcome:** Success

---

## Summary

Implemented multi-language support for date/month formatting in the Gantt chart. The core feature (exposing Frappe Gantt's language parameter) was straightforward, but discovered and fixed two related issues: hardcoded English month abbreviations in responsive labels, and a library bug causing stale language in Month view.

---

## Scope

### Planned
- [x] Add language SELECT parameter to webapp.json
- [x] Wire language config to Frappe Gantt initialization
- [x] Update backend.py for consistency
- [x] Add UI_STRINGS stub for future i18n

### Delivered
- [x] All planned items implemented
- [x] Additional fix: Localized responsive month abbreviations
- [x] Additional fix: Frappe Gantt view_mode mutation bug

### Deferred Items

| Item | Reason | Target Version |
|------|--------|----------------|
| Full UI translation | Out of scope for v0.10.0 | Future |

---

## Commit Analysis

| Metric | Value | Assessment |
|--------|-------|------------|
| Total commits | 3 | |
| Feature commits | 1 | |
| Fix commits | 2 | |
| Reverts | 0 | |
| Churn ratio | 0% | Low |

All commits were forward progress. The two fix commits addressed issues discovered during QA:
1. Responsive month labels hardcoded to English
2. Library mutation bug affecting Month view

---

## What Went Well

- **Clean implementation**: Only 3 commits, no reverts or debugging cycles
- **Leveraged browser Intl API**: No need to maintain translation dictionaries for date formatting
- **Discovered upstream bug early**: Found and patched frappe-gantt mutation issue during initial testing
- **UI_STRINGS foundation**: Stub object provides clear path for future translation work

---

## What Didn't Go Well

- **Responsive labels overlooked initially**: Hardcoded English arrays in `formatMonthLabels()` weren't caught until QA
- **Library mutation bug was subtle**: Required stepping through code to understand closure behavior

---

## Blockers Encountered

| Blocker | Impact | Resolution | Time Lost |
|---------|--------|------------|-----------|
| Hardcoded English months | Labels stayed English | Replace with Intl.DateTimeFormat | ~30 min |
| Library view_mode mutation | Month view stuck in English | Patch library with shallow copy | ~30 min |

---

## Technical Discoveries

### Library Behavior
- **Frappe Gantt view_mode mutation**: The library's `change_view_mode()` function assigns the default object directly (`this.config.view_mode = t`), then mutates it. First render captures language in a closure; subsequent renders see stale language because the same object is reused. Fix: shallow copy before assignment.

### Architecture Insights
- **Intl API for i18n**: Browser's `Intl.DateTimeFormat` with `month: 'long'|'short'|'narrow'` eliminates need for translation dictionaries for date formatting.

---

## CLI Docs Candidates

1. **Frappe Gantt view_mode mutation**: Added to `frappe-gantt-upstream-bugs.md` as Bug #7

---

## Recommendations

### For Next Release
- Consider adding UI string translations incrementally (start with view modes)

### Technical Debt
- UI_STRINGS object should eventually support multiple languages

---

## Lessons Learned

1. **Check for hardcoded strings early**: Responsive formatting had hidden English-only assumptions
2. **Library mutation bugs are sneaky**: Closures capturing mutated objects cause intermittent behavior
3. **Browser Intl API is powerful**: No custom translation tables needed for date/month formatting
