# Post-Mortem: v0.9.1

**Branch:** `feature/v0.9.1-dark-mode`
**Type:** Feature
**Duration:** 1 day (Started: 2025-12-27, Completed: 2025-12-27)
**Outcome:** âœ… Success

---

## Summary

Completed dark mode implementation by addressing all 9 visual gaps identified during v0.9.0 QA. Additionally implemented a new completion indicator feature (checkmarks on 100% tasks) based on user feedback during QA.

---

## Scope

### Planned (from spec)
- [x] Gap 1: Zoom limit banner theming
- [x] Gap 2: Task bar colors (pastel/default tier)
- [x] Gap 3: Sticky header hardcoded colors
- [x] Gap 4: Floating year text theming
- [x] Gap 5: Button hover/active states
- [x] Gap 6: Header text sporadic updates
- [x] Gap 7: Default tier progression visibility
- [x] Gap 8: Pastel palette dark mode
- [x] Gap 9: Progress bar contrast

### Additional Items (discovered during QA)
- [x] Header text contrast (use --text-main)
- [x] Floating year background (.current-upper)
- [x] Completion indicator for 100% tasks (new feature)

### Deferred Items
None

---

## Commit Analysis

| Metric | Value | Assessment |
|--------|-------|------------|
| Total commits | 1 | Clean squash |
| Feature commits | 1 | |
| Fix/debug commits | 0 | |
| Reverts | 0 | |
| Churn ratio | 0% | ðŸŸ¢ Low |

Single clean commit after multiple QA iterations. All fixes were squashed into one cohesive commit.

---

## What Went Well

- **Iterative QA process**: Multiple QA rounds caught edge cases (FontAwesome SVG issue, floating year background)
- **CSS-first approach**: Most fixes were pure CSS, no backend changes needed for theming
- **Clean commit history**: All iterations squashed into single meaningful commit
- **User-driven features**: Completion indicator added based on direct user feedback

---

## What Didn't Go Well

- **FontAwesome SVG assumption**: Initially assumed FontAwesome unicode would work in SVG `<text>` elements - it doesn't. Required pivot to inline SVG paths.
- **Library CSS discovery**: Had to dig into minified frappe-gantt.css to find `.current-upper { background: #fff }` hardcoded value

---

## Blockers Encountered

| Blocker | Impact | Resolution | Time Lost |
|---------|--------|------------|-----------|
| FontAwesome in SVG | Checkmark showed "F0 0C" text | Used inline SVG path instead | ~30 min |
| Frappe library hardcoded CSS | Floating year had white bg | Found and overrode `.current-upper` | ~15 min |

---

## Technical Discoveries

### Platform Behavior
- None new

### Library Behavior
- **Frappe Gantt CSS hardcoding**: Library has `.current-upper { background: #fff }` hardcoded for the floating year element
- **FontAwesome + SVG**: FontAwesome web fonts don't work with native SVG `<text>` elements - the SVG+JS method requires HTML elements, not SVG

### Architecture Insights
- **Luminance-based contrast**: ITU-R BT.709 luminance formula works well for determining text contrast on colored backgrounds
- **CSS variables for theming**: Using `var(--color-surface)` instead of hardcoded colors enables automatic theme switching

---

## CLI Docs Candidates

1. **FontAwesome in SVG**: FontAwesome unicode characters don't render in SVG `<text>` elements. Use inline SVG paths for cross-browser compatibility.

2. **Frappe Gantt .current-upper**: Library hardcodes white background on floating year element. Must override with `.dark-theme .current-upper { background: var(--color-surface) }`

---

## Recommendations

### For Next Release
- Consider adding more visual indicators (expected progress vs actual comparison)

### Process Improvements
- QA checklist should include "check library CSS for hardcoded values"

### Technical Debt
- None identified

---

## Lessons Learned

1. **Web fonts in SVG are unreliable** - Always use inline SVG paths for icons in SVG contexts
2. **Minified library CSS can hide surprises** - Search library CSS for hardcoded colors when implementing dark mode
3. **User QA feedback drives good features** - The completion indicator came directly from user observation during QA
