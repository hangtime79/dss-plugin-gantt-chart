# Post-Mortem: v0.9.0

**Branch:** `feature/v0.9.0-theming-and-visual-polish`
**Type:** Feature
**Duration:** 2 days (Started: 2025-12-25, Completed: 2025-12-27)
**Outcome:** âš ï¸ Partial

---

## Summary

Attempted to deliver a comprehensive theming milestone with 6 issues. Delivered 2 issues (#34, #54), deferred 4 to subsequent point releases due to QA complexity and technical challenges.

---

## Scope

### Planned
- [ ] #31: Dark Mode Support
- [ ] #34: Grid Lines Configuration
- [ ] #47: Pill Box Labels
- [ ] #49: Color Palette Selection
- [ ] #54: Zoom carryover bug
- [ ] #57: Visual stacking order

### Delivered
- [x] #34: Grid Lines Configuration
- [x] #54: Zoom carryover bug

### Deferred Items
| Item | Reason | Target Version |
|------|--------|----------------|
| #31 Dark Mode | QA incomplete, header theming issues | v0.9.1 |
| #49 Palettes | Dependent on dark mode QA | v0.9.2 |
| #57 Markers | SVG coordinate system complexity | v0.9.3 |
| #47 Labels | Pill approach failed, need right-side labels | v0.9.4 |

---

## Commit Analysis

| Metric | Value | Assessment |
|--------|-------|------------|
| Total commits | 11 | |
| Feature commits | 1 | |
| Fix/debug commits | 6 | |
| Docs commits | 4 | |
| Reverts | 1 | |
| Churn ratio | 55% | ðŸ”´ High (>40%) |

**High churn explanation:** Iterative QA process. Initial implementation touched all 6 issues, but QA revealed issues requiring multiple fix iterations. Eventually decided to defer problematic features rather than continue debugging.

---

## What Went Well

- **Grid lines (#34)** delivered cleanly with toggle and opacity controls
- **Zoom bug (#54)** fixed with per-view-mode state storage
- **Quick decision to defer** - recognized when features weren't ready rather than shipping broken
- **Milestone planning** - created v0.9.1-v0.9.4 to track deferred work

---

## What Didn't Go Well

- **Scope creep in spec** - 6 issues was too ambitious for one release
- **SVG coordinate systems** - Markers (#57) used HTML today line coordinates in SVG context, causing positioning issues
- **Pill labels (#47)** - Multiple iterations (transparency, outlines, text colors) never looked right; fundamental approach was wrong
- **DOM selector issues** - `.gantt svg` selector failed, required switch to `getElementById`

---

## Blockers Encountered

| Blocker | Impact | Resolution | Time Lost |
|---------|--------|------------|-----------|
| SVG vs HTML coordinate mismatch | Markers positioned incorrectly | Deferred to v0.9.3 | ~2 hours |
| Pill bleeding outside bars | Labels unreadable | Deferred to v0.9.4 (right-side labels) | ~3 hours |
| DOM selector `.gantt svg` failing | Pills/markers not rendering | Changed to `getElementById` | ~30 min |

---

## Technical Discoveries

### Platform Behavior
- Dataiku iframe context makes DOM debugging difficult - must add console.log in code

### Library Behavior
- Frappe-gantt uses HTML divs for `.current-highlight` (today line) but SVG for bars - coordinate systems don't align directly
- SVG elements require DOM order for stacking, not z-index

### Architecture Insights
- Pill backgrounds for SVG text labels is inherently fragile - better to position labels outside bars consistently

---

## CLI Docs Candidates

1. **SVG vs HTML coordinate systems**: When mixing HTML overlays with SVG content, coordinates don't transfer directly. Need to calculate SVG-relative positions.

2. **Right-side labels pattern**: For SVG charts, external labels are more maintainable than internal labels with background overlays.

---

## Recommendations

### For Next Release (v0.9.1)
- Focus on dark mode only - don't bundle multiple features
- Test header theming thoroughly before QA

### Process Improvements
- Limit milestone scope to 3-4 issues maximum
- QA each feature independently before combining

### Technical Debt
- Remove disabled `addPillBackgrounds()` function after v0.9.4 ships right-side labels
- Clean up marker coordinate calculation for v0.9.3

---

## Lessons Learned

1. **Smaller releases are better** - 6 issues was too many; 2-3 is ideal
2. **Defer early** - When a feature isn't working after 2-3 iterations, defer it
3. **SVG and HTML don't mix easily** - Plan for coordinate translation when combining
