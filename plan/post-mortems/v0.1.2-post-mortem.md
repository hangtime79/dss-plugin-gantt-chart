# Post-Mortem: v0.1.2

**Branch:** `bugfix/v0.1.2`
**Type:** Bugfix
**Duration:** 1 day (Started: 2025-12-20, Completed: 2025-12-20)
**Outcome:** âœ… Success

---

## Summary

Successfully addressed three critical bugs that were impacting the user experience and reliability of the Gantt chart. The most significant finding was the "Dual Execution" issue, which highlighted a mismatch between the edited file and the loaded file.

---

## Scope

### Planned
- [x] Fix Appearance Settings (Bug 1)
- [x] Fix Time Period Rendering (Bug 2)
- [x] Fix Dual Execution Race Condition (Bug 3)

### Delivered
- [x] All items delivered and verified.

---

## Commit Analysis

| Metric | Value | Assessment |
|--------|-------|------------|
| Total commits | 6 | |
| Feature commits | 0 | |
| Fix/debug commits | 3 | |
| Reverts | 0 | |
| Churn ratio | 50% | ðŸŸ¡ Medium (Due to administrative/protocol commits) |

---

## What Went Well

- Root cause of "stale settings" was quickly identified as a mismatch between live UI messages and backend config calls.
- The use of `requestAnimationFrame` solved the bar visibility issue reliably across all zoom levels.

---

## What Didn't Go Well

- **File Path Confusion**: Significant time was spent debugging `webapps/gantt-chart/app.js` only to realize the browser was loading `resource/webapp/app.js`. This led to the "Dual Execution" symptom where both scripts were running.

---

## Technical Discoveries

### Platform Behavior
- **Resource Loading**: In Dataiku standard webapps, if `body.html` points to `/plugins/PLUGIN_ID/resource/...`, that is the source of truth. Editing files in `webapps/GANTT_CHART/` while `body.html` points elsewhere will cause confusion.

### Library Behavior  
- **Frappe Gantt Rendering**: The library performs internal DOM manipulation that isn't immediately reflected. Custom DOM adjustments (like enforcing bar widths) must be deferred using `requestAnimationFrame`.

---

## CLI Docs Candidates

1. **The "Two app.js" Problem**: Document the danger of having similar scripts in `webapps/` and `resource/` and the resulting "dual execution" or "stale code" symptoms.
2. **`requestAnimationFrame` for Post-Render Adjustments**: Explain why it's necessary when working with libraries that manage their own DOM lifecycle.

---

## Lessons Learned

1. Always verify the source path in `body.html` before starting frontend development.
2. Rely on `webAppConfig` messages for real-time UI updates instead of polling the backend.
