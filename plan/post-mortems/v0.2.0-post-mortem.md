# Post-Mortem: v0.2.0

**Branch:** `feature/v0.2.0-custom-tooltips`
**Type:** Feature
**Duration:** 1 day (Started: 2025-12-20, Completed: 2025-12-20)
**Outcome:** âœ… Success

---

## Summary

Successfully implemented the Custom Tooltips feature allowing users to select and display additional data columns in the task details popup. Also identified and fixed a critical bug in the existing popup implementation where dates were not displaying correctly.

---

## Scope

### Planned
- [x] Configuration UI for tooltip columns
- [x] Backend support for extracting custom fields
- [x] Frontend rendering of custom fields
- [x] Fix existing "Undefined to Undefined" popup bug

### Delivered
- [x] All planned items delivered.
- [x] Added unit tests for new transformer logic.
- [x] Fixed an additional crash issue (cyclic object value) during debugging.

---

## Timeline

| Milestone | Planned | Actual | Variance |
|-----------|---------|--------|----------|
| Start | 2025-12-20 | 2025-12-20 | - |
| Feature complete | 2025-12-20 | 2025-12-20 | - |
| Testing complete | 2025-12-20 | 2025-12-20 | - |
| Release | 2025-12-20 | 2025-12-20 | - |

---

## Commit Analysis

| Metric | Value | Assessment |
|--------|-------|------------|
| Total commits | 7 | |
| Feature commits | 2 | |
| Fix/debug commits | 2 | |
| Reverts | 0 | |
| Churn ratio | 28% | ðŸŸ¡ Medium |

*Note: Churn was primarily due to discovering the root cause of the popup bug (wrapper object) after initial implementation.*

---

## What Went Well

- **Spec-driven development**: The specification was clear on the technical approach (passing list of dicts), which made backend implementation straightforward.
- **Unit Testing**: Adding unit tests immediately verified the transformer logic handling various data types.

## What Didn't Go Well

- **Frappe Gantt Documentation Gap**: The library's `popup` callback behavior (passing a wrapper object `{task, chart}` instead of just `task`) was not documented or expected, leading to the "N/A to N/A" bug.
- **Debugging Crash**: Attempting to `JSON.stringify` the task object for inspection caused a crash due to circular references, slowing down diagnosis.

---

## Technical Discoveries

### Library Behavior
- **Frappe Gantt Popup Callback**: The `popup(task)` callback receives an object that might be `{ task: Task, chart: Gantt }` rather than just the `Task` object. It's safer to check `if (task.task) task = task.task`.
- **Circular References**: The internal `Task` objects in Frappe Gantt contain references to DOM elements or parent objects, making them unsafe for `JSON.stringify`.

---

## CLI Docs Candidates

Items to be added to cli-docs-template-update.md:

1. **Frappe Gantt Popup Wrapper**: Explain the wrapper object structure in popup callbacks.
2. **Debugging Frappe Gantt Objects**: Warn against `JSON.stringify` on task objects.

---

## Lessons Learned

1. **Inspect objects carefully**: When integrating with third-party libraries, assume the data structure might differ from documentation or expectations. Log raw objects (without stringify) to inspect them in browser console.
2. **Verify prerequisites**: The "Prerequisite: The current popup is broken" note in the spec was crucial. Fixing existing bugs before layering new features on top is the right approach.
