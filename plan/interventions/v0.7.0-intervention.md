# Intervention Log: v0.7.0 Expected Progress & Polish

**Branch:** `feature/v0.7.0-expected-progress-and-polish`
**Started:** 2025-12-26
**Status:** üîÑ IN PROGRESS - QA Round 1 Issues

---

## Issues Being Addressed

| Issue | Title | Status |
|-------|-------|--------|
| #33 | Expected Progress Indicator | üîÑ Fixing |
| #45 | Bar corner radius default to 10 | ‚úÖ QA Passed |
| #43 | Remove 'Disable all Editing' option | ‚úÖ QA Passed |
| #42 | Weekend highlighting off by default | ‚úÖ QA Passed |
| #38 | Float dependency strings normalization | üîÑ Fixing |
| #37 | Pandas deprecation warning | ‚è∏Ô∏è Needs test method |

---

## QA Round 1 Results

### Passed
- [x] #45 - Bar corners rounded (radius 10)
- [x] #42 - Weekend highlighting OFF by default
- [x] #43 - No "Read-only" option in Behavior

### Failed
- [ ] #33 - Expected progress toggle exists but markers don't show
- [ ] #38 - Float values cause CSS selector error

### Error Details

**CSS Selector Error:**
```
Uncaught DOMException: Element.querySelector: '.highlight-55.67' is not a valid selector
```

**Root Cause:** The `expected_progress` field (a float like 55.67) is being picked up by frappe-gantt and used in a CSS selector. The decimal point breaks the selector because `.` is a class separator in CSS.

**Fix Options:**
1. Rename field to avoid frappe-gantt detection (prefix with `_`)
2. Round to integer
3. Store as string

---

## Fix Attempts

### Attempt 1: Rename field to `_expected_progress`
**Hypothesis:** Frappe-gantt only looks at standard task properties. Prefixing with `_` should hide it.

**Files to change:**
- `python-lib/ganttchart/task_transformer.py` - rename field
- `webapps/gantt-chart/app.js` - update marker injection to use new name

---

## Files Modified

| File | Changes |
|------|---------|
| `webapps/gantt-chart/webapp.json` | Config defaults, removed readonly, added showExpectedProgress |
| `webapps/gantt-chart/app.js` | readonly=true, expected progress markers |
| `python-lib/ganttchart/task_transformer.py` | _calculate_expected_progress, float normalization |
| `python-lib/ganttchart/date_parser.py` | Comment update |
| `resource/webapp/style.css` | Expected progress marker styling |
| `plugin.json` | Version 0.7.0 |
| `tests/python/unit/test_task_transformer.py` | 5 new expected progress tests |

---

## Recovery Notes

If context compacted, read this file for:
- QA status of each issue
- Current error being fixed
- Files modified
