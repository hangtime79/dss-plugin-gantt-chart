# Release Notes: v0.0.2

**Release Date:** 2025-12-18
**Type:** Bugfix Release

---

## Summary

Critical bugfix release addressing issues discovered during initial QA testing. The plugin now loads reliably and follows standard Dataiku plugin architectural patterns.

---

## Bugs Fixed

### 1. AttributeError: `dataiku.get_datadir()`
- **Issue:** Backend crashed immediately on startup
- **Root Cause:** Invalid API call to manually add `python-lib` to `sys.path`
- **Fix:** Removed manual path manipulation (Dataiku handles this automatically)

### 2. Infinite Loading Spinner
- **Issue:** "Loading Gantt chart..." displayed indefinitely
- **Root Cause:** Multiple issues:
  - Missing `<script>` and `<link>` tags in `body.html`
  - Incorrect relative paths for static assets
  - Race condition in config message handling
- **Fix:**
  - Moved assets to `resource/webapp/`
  - Used absolute platform paths `/plugins/gantt-chart/resource/webapp/...`
  - Added synchronous initialization fallback

### 3. `dataiku.webappBackend` Undefined
- **Issue:** Frontend-backend communication failed
- **Root Cause:** Standard Dataiku JS libraries don't automatically provide this helper
- **Fix:** Created `dku-helpers.js` following patterns from waterfall-chart and geospatial-toolkit plugins

### 4. Spinner Not Hiding on Error
- **Issue:** Error messages appeared but spinner kept spinning
- **Fix:** Added explicit `hideLoading()` call in `displayError()` function

---

## Improvements

### Flexible Data Requirements
- Made `nameColumn` optional
- When not provided, Task ID is used as the display name
- Reduces "Missing parameter" errors for simple use cases

### Standardized Architecture
- Created `resource/webapp/dku-helpers.js` for backend communication
- Follows established patterns from other Dataiku plugins
- More robust than inline polyfill approach

---

## Files Changed

| File | Change |
|------|--------|
| `webapps/gantt-chart/backend.py` | Removed invalid `sys.path` manipulation |
| `webapps/gantt-chart/body.html` | Fixed asset paths, simplified to fragment |
| `webapps/gantt-chart/webapp.json` | Added `standardWebAppLibraries`, `noJSSecurity` |
| `resource/webapp/dku-helpers.js` | Created (new file) |
| `resource/webapp/app.js` | Moved from webapps/, added `hideLoading()` |
| `resource/webapp/style.css` | Moved from webapps/ |
| `python-lib/ganttchart/task_transformer.py` | Handle missing name column |
| `code-env/python/spec/requirements.txt` | Restored (was accidentally deleted) |
| `plugin.json` | Bumped version to 0.0.2 |

---

## Known Issues Remaining

### High Priority
- **OOM Risk:** `dataset.get_dataframe()` loads entire dataset into memory
- **Recommendation:** Implement row limit at data loading level

### Medium Priority
- **In-Memory Filtering:** Filters applied in Python after data loaded
- **Recommendation:** Push filtering to data engine when possible

### Low Priority
- **Pandas Warning:** `infer_datetime_format` deprecation (3 test warnings)

---

## Reference Documents

- Bug details: `plan/Bug Resolution Accounting - 2025-12-18.md`
- Architecture notes: `plan/cli-docs-template-update.md`
