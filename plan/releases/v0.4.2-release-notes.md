# Release Notes: v0.4.2

**Release Date:** 2025-12-23
**Type:** Feature / Bugfix
**Branch:** `feature/v0.4.2-debounce-and-sticky-header`

---

## Summary

This release adds configuration input debouncing to prevent excessive re-renders when adjusting numeric settings, and implements a JavaScript-based sticky header for the timeline. The debouncing feature is fully functional. The sticky header works when chart content fills the viewport but has a known limitation with narrow content.

---

## Changes

### Added
- **Configuration debouncing:** 300ms debounce timer prevents chart from re-rendering on every keystroke/click when adjusting numeric inputs (Bar Height, Column Width, etc.)
- **View state preservation:** View mode and scroll position are now saved and restored across configuration changes
- **Render overlap prevention:** `renderInProgress` flag prevents multiple simultaneous render operations that could cause browser hangs
- **Sticky header (partial):** Timeline header stays visible during vertical scroll when chart content fills the viewport

### Fixed
- Rapid adjustment of numeric config inputs no longer causes visual jank or scroll position jumps
- Browser no longer hangs when rapidly changing configuration values

---

## Files Modified

| File | Change Type | Description |
|------|-------------|-------------|
| `webapps/gantt-chart/app.js` | Modified | Added debounce logic, view state save/restore, renderInProgress flag, setupStickyHeader() |
| `resource/webapp/style.css` | Modified | Updated sticky header CSS for JS control |
| `plugin.json` | Modified | Version bump 0.4.1 â†’ 0.4.2 |
| `plan/interventions/v0.4.2-intervention.md` | Added | Detailed debugging log of 5 implementation attempts |
| `plan/specs/feature-v0.4.2-spec.md` | Added | Original specification (implementation diverged) |

---

## Testing

- **Unit Tests:** Pre-existing collection errors (not caused by this branch)
- **Manual Verification:**
  - [x] Debounce: Rapid spinner clicks result in single re-render
  - [x] View state: Mode and scroll preserved across config changes
  - [x] Sticky: Header stays at top during vertical scroll (edge-to-edge content)
  - [ ] Sticky: Narrow content scenario (known limitation)

---

## Breaking Changes

None

---

## Known Issues

| Issue | Description | Workaround | Tracking |
|-------|-------------|------------|----------|
| Sticky header janky with narrow content | When chart SVG doesn't fill viewport width (e.g., Year view with short date range), sticky header is choppy | Use date ranges that span enough time to fill viewport | #21 |
| Hour view slow | Large SVG (1.4M px) with 300+ tasks renders slowly | Inherent to frappe-gantt; no workaround | - |

---

## Dependencies

None added or changed.

---

## Related Documents

- Spec: `plan/specs/feature-v0.4.2-spec.md`
- Post-mortem: `plan/post-mortems/v0.4.2-post-mortem.md`
- Intervention Log: `plan/interventions/v0.4.2-intervention.md`
- Known Limitation: GitHub Issue #21
