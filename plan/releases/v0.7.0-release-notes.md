# Release Notes: v0.7.0

**Release Date:** 2025-12-26
**Type:** Feature
**Branch:** `feature/v0.7.0-expected-progress-and-polish`

---

## Summary

This release adds an expected progress indicator that shows where task completion should be based on the current date, along with several visual polish improvements and robustness fixes for handling edge-case data.

---

## Changes

### Added
- **Expected Progress Indicator** (#33): Red dashed vertical line showing where progress should be based on elapsed time
  - Toggle via "Show expected progress" in View Settings
  - Calculated as: (today - start) / (end - start) * 100
  - Only shows for tasks currently in progress (started but not ended)

### Fixed
- **Float ID CSS Selector Error** (#38): IDs containing decimals (e.g., "54.8") no longer crash the chart
  - Implemented hex-encoding for CSS-unsafe characters: `54.8` â†’ `54_x2e_8`
  - Original IDs preserved in tooltips via `_display_id` field
- **Month View Positioning Bug**: Fixed frappe-gantt library bug where task bars appeared ~1 month late
  - Root cause: `diff()` function used `o%30/30` instead of `(n.getDate()-1)/30`
  - Patched in `resource/frappe-gantt.umd.js`

### Changed
- **Bar Corner Radius** (#45): Default increased from 3px to 10px for softer appearance
- **Weekend Highlighting** (#42): Now OFF by default (was ON)
- **Read-only Mode** (#43): Removed user-facing toggle (editing was already disabled internally)

### Deprecated
- None

---

## Files Modified

| File | Change Type | Description |
|------|-------------|-------------|
| `webapps/gantt-chart/webapp.json` | Modified | Added showExpectedProgress, changed defaults, removed readonly |
| `webapps/gantt-chart/app.js` | Modified | Expected progress markers, CSS-safe ID lookup |
| `python-lib/ganttchart/task_transformer.py` | Modified | _calculate_expected_progress, _make_css_safe, _display_id |
| `resource/webapp/style.css` | Modified | Expected progress marker styling |
| `resource/frappe-gantt.umd.js` | Modified | Month view diff() bug fix |
| `plugin.json` | Modified | Version 0.7.0 |
| `tests/python/unit/test_task_transformer.py` | Modified | 10 new tests (expected progress + CSS-safe) |

---

## Testing

- **Unit Tests:** 122/122 passing
- **New Tests Added:**
  - `TestExpectedProgress` (5 tests) - Expected progress calculation edge cases
  - `TestCssSafe` (5 tests) - CSS-safe ID encoding
- **Manual Verification:**
  - [x] Expected progress markers appear on in-progress tasks
  - [x] Month view bars align with correct month columns
  - [x] Tooltips show original IDs (not hex-encoded)
  - [x] Float IDs no longer cause CSS selector errors

---

## Breaking Changes

None. Default values changed but explicit user settings are preserved.

---

## Known Issues

- None introduced

---

## Dependencies

- None changed

---

## Related Documents

- Intervention Log: `plan/interventions/v0.7.0-intervention.md`
- Post-mortem: `plan/post-mortems/v0.7.0-post-mortem.md`
- Upstream Bugs: `plan/frappe-gantt-upstream-bugs.md` (Bug #6)
